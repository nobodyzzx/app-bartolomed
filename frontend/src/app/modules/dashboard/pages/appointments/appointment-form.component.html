<div class="appointment-form-container min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100 relative overflow-hidden p-8">
  <!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 right-0 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"></div>
    <div class="absolute top-0 left-0 w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"></div>
    <div class="absolute bottom-0 left-1/2 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"></div>
  </div>
  
  <div class="appointment-form-content" [ngClass]="{ 'sidebar-collapsed': !isExpanded, 'sidebar-expanded': isExpanded }">
    <!-- Header -->
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-blue-900 mb-3">{{ isEditMode ? 'Editar Cita' : 'Nueva Cita Médica' }}</h2>
      <div class="w-20 h-1 bg-blue-600 mx-auto rounded-full mb-3"></div>
      <p class="text-blue-600">{{ isEditMode ? 'Actualice la información de la cita' : 'Complete el formulario para programar una nueva cita' }}</p>
    </div>

    <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()" class="mx-auto w-full max-w-5xl p-8 rounded-2xl shadow-lg bg-white space-y-8">
      
      <!-- Información Principal -->
      <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100 transition-all duration-300 hover:shadow-xl backdrop-blur-sm backdrop-filter">
        <div class="flex items-center mb-8">
          <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-3 rounded-xl shadow-md mr-4">
            <mat-icon class="text-white">event</mat-icon>
          </div>
          <div>
            <h3 class="text-xl font-semibold text-blue-900">Información de la Cita</h3>
            <p class="text-blue-600 text-sm mt-1">Datos principales de la cita médica</p>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Paciente</mat-label>
            <mat-select formControlName="patientId" required>
              <!-- Aquí deberías cargar los pacientes disponibles -->
              <mat-option value="patient-1">Juan Pérez González</mat-option>
              <mat-option value="patient-2">María López Martínez</mat-option>
              <mat-option value="patient-3">Carlos Rodríguez Silva</mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-blue-400">person</mat-icon>
            <mat-error *ngIf="appointmentForm.get('patientId')?.hasError('required')">El paciente es obligatorio</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Doctor</mat-label>
            <mat-select formControlName="doctorId" required (selectionChange)="checkAvailability()">
              <!-- Aquí deberías cargar los doctores disponibles -->
              <mat-option value="doctor-1">Dr. Ana García - Cardiología</mat-option>
              <mat-option value="doctor-2">Dr. Luis Martín - Medicina General</mat-option>
              <mat-option value="doctor-3">Dra. Carmen Ruiz - Pediatría</mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-blue-400">medical_services</mat-icon>
            <mat-error *ngIf="appointmentForm.get('doctorId')?.hasError('required')">El doctor es obligatorio</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Clínica</mat-label>
            <mat-select formControlName="clinicId" required>
              <!-- Aquí deberías cargar las clínicas disponibles -->
              <mat-option value="clinic-1">Clínica Central</mat-option>
              <mat-option value="clinic-2">Clínica Norte</mat-option>
              <mat-option value="clinic-3">Clínica Sur</mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-blue-400">local_hospital</mat-icon>
            <mat-error *ngIf="appointmentForm.get('clinicId')?.hasError('required')">La clínica es obligatoria</mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Fecha y Hora -->
      <div class="bg-white p-8 rounded-2xl shadow-lg border border-green-100 transition-all duration-300 hover:shadow-xl backdrop-blur-sm backdrop-filter">
        <div class="flex items-center mb-8">
          <div class="bg-gradient-to-r from-green-500 to-green-600 p-3 rounded-xl shadow-md mr-4">
            <mat-icon class="text-white">schedule</mat-icon>
          </div>
          <div>
            <h3 class="text-xl font-semibold text-green-900">Fecha y Hora</h3>
            <p class="text-green-600 text-sm mt-1">Seleccione la fecha y hora de la cita</p>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Fecha</mat-label>
            <input matInput formControlName="appointmentDate" type="date" required (change)="checkAvailability()" />
            <mat-icon matSuffix class="text-green-400">calendar_today</mat-icon>
            <mat-error *ngIf="appointmentForm.get('appointmentDate')?.hasError('required')">La fecha es obligatoria</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Hora</mat-label>
            <input matInput formControlName="appointmentTime" type="time" required (change)="checkAvailability()" />
            <mat-icon matSuffix class="text-green-400">access_time</mat-icon>
            <mat-error *ngIf="appointmentForm.get('appointmentTime')?.hasError('required')">La hora es obligatoria</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Duración</mat-label>
            <mat-select formControlName="duration" required>
              <mat-option *ngFor="let duration of durations" [value]="duration.value">
                {{ duration.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-green-400">timer</mat-icon>
            <mat-error *ngIf="appointmentForm.get('duration')?.hasError('required')">La duración es obligatoria</mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Detalles de la Cita -->
      <div class="bg-white p-8 rounded-2xl shadow-lg border border-purple-100 transition-all duration-300 hover:shadow-xl backdrop-blur-sm backdrop-filter">
        <div class="flex items-center mb-8">
          <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-3 rounded-xl shadow-md mr-4">
            <mat-icon class="text-white">description</mat-icon>
          </div>
          <div>
            <h3 class="text-xl font-semibold text-purple-900">Detalles de la Cita</h3>
            <p class="text-purple-600 text-sm mt-1">Información adicional sobre la cita</p>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Tipo de Cita</mat-label>
            <mat-select formControlName="appointmentType" required>
              <mat-option *ngFor="let type of appointmentTypes" [value]="type.value">
                {{ type.label }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-purple-400">category</mat-icon>
            <mat-error *ngIf="appointmentForm.get('appointmentType')?.hasError('required')">El tipo de cita es obligatorio</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Prioridad</mat-label>
            <mat-select formControlName="priority" required>
              <mat-option *ngFor="let priority of priorities" [value]="priority.value">
                <div class="flex items-center gap-2">
                  <span [ngClass]="{
                    'text-green-600': priority.value === 'low',
                    'text-blue-600': priority.value === 'normal',
                    'text-orange-600': priority.value === 'high',
                    'text-red-600': priority.value === 'urgent'
                  }">●</span>
                  {{ priority.label }}
                </div>
              </mat-option>
            </mat-select>
            <mat-icon matSuffix class="text-purple-400">priority_high</mat-icon>
            <mat-error *ngIf="appointmentForm.get('priority')?.hasError('required')">La prioridad es obligatoria</mat-error>
          </mat-form-field>
        </div>
        
        <div class="grid grid-cols-1 gap-6">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Motivo de la Cita</mat-label>
            <input matInput formControlName="reason" required placeholder="Describe brevemente el motivo de la consulta" />
            <mat-icon matSuffix class="text-purple-400">help_outline</mat-icon>
            <mat-error *ngIf="appointmentForm.get('reason')?.hasError('required')">El motivo de la cita es obligatorio</mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Notas Adicionales</mat-label>
            <textarea matInput formControlName="notes" rows="4" placeholder="Información adicional relevante para la cita"></textarea>
            <mat-icon matSuffix class="text-purple-400">note</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Botones de Acción -->
      <div class="flex justify-center gap-4 pt-8">
        <button type="button" mat-stroked-button color="warn" (click)="router.navigate(['/dashboard/appointments/list'])" class="px-8">
          <mat-icon>cancel</mat-icon>
          Cancelar
        </button>
        <button type="button" mat-stroked-button color="accent" (click)="checkAvailability()" class="px-8">
          <mat-icon>check_circle</mat-icon>
          Verificar Disponibilidad
        </button>
        <button type="submit" mat-raised-button color="primary" [disabled]="appointmentForm.invalid" class="px-8">
          <mat-icon>{{ isEditMode ? 'update' : 'save' }}</mat-icon>
          {{ isEditMode ? 'Actualizar' : 'Programar' }} Cita
        </button>
      </div>
    </form>
  </div>
</div>
