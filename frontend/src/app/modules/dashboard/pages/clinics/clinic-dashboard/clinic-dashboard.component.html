<div
  class="clinic-dashboard min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-blue-100 relative overflow-hidden p-8"
>
  <!-- Elementos decorativos de fondo -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div
      class="absolute top-0 right-0 w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"
    ></div>
    <div
      class="absolute top-0 left-0 w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"
    ></div>
    <div
      class="absolute bottom-0 left-1/2 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"
    ></div>
  </div>

  <div class="relative z-10">
    <!-- Header -->
    <div class="dashboard-header text-center mb-12">
      <h1 class="text-4xl font-bold text-blue-900 mb-3">Gestión de Clínicas</h1>
      <div class="w-20 h-1 bg-blue-600 mx-auto rounded-full mb-3"></div>
      <p class="text-blue-600 text-lg">Administra y supervisa todas tus clínicas</p>
    </div>

    <!-- Loading indicator -->
    <div *ngIf="isLoading" class="loading-container flex justify-center items-center py-20">
      <mat-spinner diameter="60"></mat-spinner>
    </div>

    <!-- Statistics cards -->
    <div
      *ngIf="statistics && !isLoading"
      class="stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12"
    >
      <!-- Total Clínicas Card -->
      <mat-card
        class="stat-card cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-blue-100"
        (click)="showAllClinics()"
      >
        <mat-card-content class="p-6">
          <div class="stat-content flex items-center gap-4">
            <div
              class="stat-icon total w-16 h-16 rounded-xl bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center shadow-lg"
            >
              <mat-icon class="text-white text-3xl">business</mat-icon>
            </div>
            <div class="stat-info flex-1">
              <h3 class="text-3xl font-bold text-blue-900">{{ statistics.totalClinics }}</h3>
              <p class="text-blue-600 text-sm mt-1">Total de Clínicas</p>
            </div>
            <mat-icon class="text-blue-300 text-2xl">arrow_forward</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Clínicas Activas Card -->
      <mat-card
        class="stat-card cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-green-100"
        (click)="showActiveClinics()"
      >
        <mat-card-content class="p-6">
          <div class="stat-content flex items-center gap-4">
            <div
              class="stat-icon active w-16 h-16 rounded-xl bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg"
            >
              <mat-icon class="text-white text-3xl">check_circle</mat-icon>
            </div>
            <div class="stat-info flex-1">
              <h3 class="text-3xl font-bold text-green-900">{{ statistics.activeClinics }}</h3>
              <p class="text-green-600 text-sm mt-1">Clínicas Activas</p>
            </div>
            <mat-icon class="text-green-300 text-2xl">arrow_forward</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Clínicas Inactivas Card -->
      <mat-card
        class="stat-card cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-red-100"
        (click)="showInactiveClinics()"
      >
        <mat-card-content class="p-6">
          <div class="stat-content flex items-center gap-4">
            <div
              class="stat-icon inactive w-16 h-16 rounded-xl bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-lg"
            >
              <mat-icon class="text-white text-3xl">cancel</mat-icon>
            </div>
            <div class="stat-info flex-1">
              <h3 class="text-3xl font-bold text-red-900">{{ statistics.inactiveClinics }}</h3>
              <p class="text-red-600 text-sm mt-1">Clínicas Inactivas</p>
            </div>
            <mat-icon class="text-red-300 text-2xl">arrow_forward</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Usuarios Asignados Card -->
      <mat-card
        class="stat-card cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-purple-100"
        (click)="showAssignedUsers()"
      >
        <mat-card-content class="p-6">
          <div class="stat-content flex items-center gap-4">
            <div
              class="stat-icon users w-16 h-16 rounded-xl bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg"
            >
              <mat-icon class="text-white text-3xl">group</mat-icon>
            </div>
            <div class="stat-info flex-1">
              <h3 class="text-3xl font-bold text-purple-900">{{ statistics.totalUsers }}</h3>
              <p class="text-purple-600 text-sm mt-1">Usuarios Asignados</p>
            </div>
            <mat-icon class="text-purple-300 text-2xl">arrow_forward</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Recent clinics section -->
    <mat-card class="recent-clinics-card shadow-lg border border-blue-100">
      <mat-card-header
        class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-t-lg"
      >
        <mat-card-title class="text-2xl font-bold">Clínicas Recientes</mat-card-title>
        <mat-card-subtitle class="text-blue-100">Últimas clínicas registradas</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content class="p-6">
        <div *ngIf="recentClinics.length === 0" class="no-data text-center py-12">
          <mat-icon class="text-6xl text-gray-300 mb-4">business</mat-icon>
          <p class="text-gray-500 text-lg">No hay clínicas registradas</p>
          <button mat-stroked-button color="primary" (click)="navigateToNewClinic()" class="mt-4">
            Registrar Primera Clínica
          </button>
        </div>

        <div *ngIf="recentClinics.length > 0" class="clinics-list space-y-4">
          <div
            *ngFor="let clinic of recentClinics"
            class="clinic-item p-4 border border-gray-200 rounded-lg hover:border-blue-400 hover:shadow-md transition-all duration-300 cursor-pointer"
            (click)="viewClinic(clinic)"
          >
            <div class="flex items-start justify-between">
              <div class="clinic-info flex-1">
                <h4 class="text-lg font-semibold text-gray-900 mb-2">{{ clinic.name }}</h4>
                <p class="clinic-address text-gray-600 text-sm mb-2 flex items-center gap-2">
                  <mat-icon
                    class="text-gray-400"
                    [style.font-size]="'18px'"
                    [style.width]="'18px'"
                    [style.height]="'18px'"
                    >location_on</mat-icon
                  >
                  {{ clinic.address }}
                  <span
                    *ngIf="clinic.departamento || clinic.provincia || clinic.localidad"
                    class="text-gray-500"
                  >
                    —
                    <ng-container *ngIf="clinic.departamento">{{
                      clinic.departamento
                    }}</ng-container>
                    <ng-container *ngIf="clinic.provincia"> - {{ clinic.provincia }}</ng-container>
                    <ng-container *ngIf="clinic.localidad"> - {{ clinic.localidad }}</ng-container>
                  </span>
                </p>
                <p class="clinic-contact text-gray-600 text-sm flex items-center gap-2">
                  <mat-icon
                    class="text-gray-400"
                    [style.font-size]="'18px'"
                    [style.width]="'18px'"
                    [style.height]="'18px'"
                    >phone</mat-icon
                  >
                  {{ clinic.phone }}
                  <span *ngIf="clinic.email" class="email ml-4 flex items-center gap-1">
                    <mat-icon
                      class="text-gray-400"
                      [style.font-size]="'18px'"
                      [style.width]="'18px'"
                      [style.height]="'18px'"
                      >email</mat-icon
                    >
                    {{ clinic.email }}
                  </span>
                </p>
              </div>
              <div class="clinic-status ml-4">
                <mat-chip
                  [class.status-active]="clinic.isActive"
                  [class.status-inactive]="!clinic.isActive"
                  [color]="clinic.isActive ? 'primary' : 'warn'"
                  selected
                >
                  {{ clinic.isActive ? 'Activa' : 'Inactiva' }}
                </mat-chip>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions class="p-6 border-t border-gray-200">
        <button
          mat-raised-button
          color="primary"
          (click)="navigateToClinics()"
          *ngIf="recentClinics.length > 0"
          class="w-full"
        >
          <mat-icon>list</mat-icon>
          Ver Todas las Clínicas
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
