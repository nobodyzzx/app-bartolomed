<mat-toolbar class="bg-blue-100 shadow-md px-4 py-2">
  <div class="flex items-center w-full">
    <!-- Left Section: Navigation Menu -->
    <div class="flex items-center flex-shrink-0">
      <button
        mat-icon-button
        (click)="toggleSidenav()"
        aria-label="Toggle side navigation"
        class="text-blue-900 hover:bg-blue-200 transition-colors"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </div>

    <!-- Center Section: Logo -->
    <div class="flex-grow flex justify-center mx-4">
      <img
        class="max-h-12 object-contain"
        src="assets/images/logo-horizontal-bartolomed.webp"
        width="200"
        height="48"
        alt="Bartolomed Logo"
      />
    </div>

    <!-- Right Section: User Info and Actions -->
    <div class="flex items-center space-x-4">
      <!-- User Information -->
      <div class="flex items-center space-x-2 text-blue-800">
        <div class="flex flex-col text-right">
          <span class="text-sm font-medium">
            {{ user()?.personalInfo?.firstName || 'Nombre' }}
            {{ user()?.personalInfo?.lastName || 'Apellido' }}
          </span>
          <span class="uppercase text-xs font-medium text-blue-600">
            {{ user()?.roles?.join(' | ') || 'Sin rol asignado' }}
          </span>
        </div>

        <!-- User Menu -->
        <button
          mat-icon-button
          [matMenuTriggerFor]="userMenu"
          aria-label="User menu"
          class="text-blue-900 hover:bg-blue-200 transition-colors"
        >
          <mat-icon>more_vert</mat-icon>
        </button>

        <mat-menu #userMenu="matMenu" class="user-menu bg-slate-50">
          <div mat-menu-content class="min-w-[250px]">
            <!-- Opción de Perfil -->
            <button
              mat-menu-item
              class="flex items-center p-3 hover:bg-blue-50 transition-colors duration-200 group"
            >
              <mat-icon class="mr-3 text-blue-800 group-hover:text-blue-800"
                >account_circle</mat-icon
              >
              <span class="text-blue-800 group-hover:text-blue-900">Mi Perfil</span>
            </button>

            <!-- Opción de Configuración -->
            <button
              mat-menu-item
              class="flex items-center p-3 hover:bg-blue-50 transition-colors duration-200 group"
            >
              <mat-icon class="mr-3 text-blue-600 group-hover:text-gray-800">settings</mat-icon>
              <span class="text-blue-900 group-hover:text-gray-900">Configuración</span>
            </button>

            <!-- Separador -->
            <mat-divider class="my-2"></mat-divider>

            <!-- Simular Roles -->
            <button
              mat-menu-item
              (click)="openRoleSimulator()"
              class="flex items-center p-3 hover:bg-blue-50 transition-colors duration-200 group"
            >
              <mat-icon class="mr-3 text-blue-700 group-hover:text-blue-900"
                >admin_panel_settings</mat-icon
              >
              <span class="text-blue-900 group-hover:text-blue-900">Simular Roles (DEMO)</span>
            </button>

            <!-- Separador -->
            <mat-divider class="my-2"></mat-divider>
            <button
              mat-menu-item
              (click)="onLogout()"
              class="flex items-center p-3 hover:bg-red-50 transition-colors duration-200 group"
            >
              <mat-icon class="mr-3 text-red-600 group-hover:text-red-800">logout</mat-icon>
              <span class="text-red-600 group-hover:text-red-800">Cerrar Sesión</span>
            </button>
          </div>
        </mat-menu>
      </div>
    </div>
  </div>
</mat-toolbar>
